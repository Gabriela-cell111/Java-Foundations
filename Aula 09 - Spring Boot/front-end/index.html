<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Produtos</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #f5f6f8;
        }
        .card-header {
            background-color: #0d6efd;
            color: #ffffff;
            font-weight: 500;
        }
        pre {
            background-color: #212529;
            color: #f8f9fa;
            padding: 1rem;
            border-radius: 0.5rem;
        }
    </style>
</head>
<body>

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-lg-8 col-md-10">
            <div class="card shadow-sm">
                <div class="card-header">
                    Cadastro de Produtos
                </div>
                <div class="card-body">

                    <form id="produtoForm">
                        <div class="row g-3">

                            <div class="col-md-6">
                                <label for="tipo" class="form-label">Tipo</label>
                                <select id="tipo" class="form-select" required>
                                    <option value="">Selecione</option>
                                    <option value="Camisa">Camisa</option>
                                    <option value="Blusa">Blusa</option>
                                    <option value="Suéter">Suéter</option>
                                </select>
                            </div>

                            <div class="col-md-6">
                                <label for="tamanho" class="form-label">Tamanho</label>
                                <select id="tamanho" class="form-select" required>
                                    <option value="">Selecione</option>
                                    <option value="PP">PP</option>
                                    <option value="P">P</option>
                                    <option value="M">M</option>
                                    <option value="G">G</option>
                                    <option value="GG">GG</option>
                                </select>
                            </div>

                            <div class="col-md-6">
                                <label for="quantidade" class="form-label">Quantidade</label>
                                <input type="number" id="quantidade" class="form-control" min="0" step="1" required>
                            </div>

                            <div class="col-md-6">
                                <label for="valor" class="form-label">Valor (R$)</label>
                                <input type="number" id="valor" class="form-control" min="0" step="0.01" required>
                            </div>

                            <div class="col-12">
                                <label for="marca" class="form-label">Marca</label>
                                <input type="text" id="marca" class="form-control" required>
                            </div>

                            <div class="col-12 d-grid">
                                <button type="submit" class="btn btn-primary">Cadastrar Produto</button>
                            </div>
                        </div>
                    </form>

                    <hr class="my-4">

                    <h6>Resposta da API</h6>
                    <pre id="resultado">Aguardando envio...</pre>

                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap Bundle JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
    const form = document.getElementById('produtoForm');
    const resultado = document.getElementById('resultado');

    form.addEventListener('submit', function (event) {
        event.preventDefault();

        const produto = {
            tipo: document.getElementById('tipo').value,
            tamanho: document.getElementById('tamanho').value,
            quantidade: parseInt(document.getElementById('quantidade').value, 10),
            preco: parseFloat(document.getElementById('valor').value),
            marca: document.getElementById('marca').value
        };

        fetch('http://localhost:8080/roupas', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(produto)
        })
         .then(response => {
                if (response.ok) {
                    document.getElementById("resposta").textContent =
                        "Produto cadastrado com sucesso!";
                }
            })       }
            
        .then(data => {
            resultado.textContent = JSON.stringify(data, null, 2);
            form.reset();
        })
        .catch(error => {
            resultado.textContent = JSON.stringify({ erro: error.message }, null, 2);
        });
    });
</script>

</body>
</html>
